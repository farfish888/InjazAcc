<Page x:Class="InjazAcc.UI.Views.Pages.ExpensesPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      Title="المصروفات">
  <Grid Margin="8">
    <Grid.ColumnDefinitions>
      <ColumnDefinition Width="2*"/>
      <ColumnDefinition Width="3*"/>
    </Grid.ColumnDefinitions>

    <Border Background="#1FFFFFFF" Padding="12" CornerRadius="12" Margin="4">
      <StackPanel>
        <TextBlock Text="سند صرف مصروف" FontSize="18" FontWeight="Bold" Margin="0,0,0,12"/>
        <TextBlock Text="المستفيد"/>
        <TextBox Text="{Binding Payee, UpdateSourceTrigger=PropertyChanged}"/>

        <TextBlock Text="حساب المصروف" Margin="0,8,0,0"/>
        <ComboBox ItemsSource="{Binding ExpenseAccounts}" SelectedItem="{Binding SelectedAccount}" DisplayMemberPath="Name"/>

        <TextBlock Text="المبلغ (بدون ضريبة)" Margin="0,8,0,0"/>
        <TextBox Text="{Binding Amount, UpdateSourceTrigger=PropertyChanged}"/>

        <StackPanel Orientation="Horizontal" Margin="0,8,0,0">
          <Button Content="إعادة حساب" Command="{Binding RecalcCommand}"/>
          <TextBlock Text="VAT:" Margin="8,6,4,0"/>
          <TextBlock Text="{Binding Vat}" Margin="0,6,8,0"/>
          <TextBlock Text="الإجمالي:" Margin="8,6,4,0"/>
          <TextBlock Text="{Binding Total}" Margin="0,6,0,0"/>
        </StackPanel>

        <TextBlock Text="طريقة الدفع" Margin="0,8,0,0"/>
        <ComboBox ItemsSource="{Binding Methods}" SelectedItem="{Binding Method}"/>

        <TextBlock Text="رقم السند (اختياري)" Margin="0,8,0,0"/>
        <TextBox Text="{Binding Number, UpdateSourceTrigger=PropertyChanged}"/>

        <Button Content="حفظ + ترحيل" Margin="0,12,0,0" Command="{Binding SaveCommand}"/>
      </StackPanel>
    </Border>

    <Border Grid.Column="1" Background="#1FFFFFFF" Padding="12" CornerRadius="12" Margin="4">
      <StackPanel>
        <TextBlock Text="آخر 50 سند" FontSize="18" FontWeight="Bold" Margin="0,0,0,12"/>
        <DataGrid ItemsSource="{Binding Items}" AutoGenerateColumns="False" IsReadOnly="True" Height="420">
          <DataGrid.Columns>
            <DataGridTextColumn Header="رقم" Binding="{Binding Number}"/>
            <DataGridTextColumn Header="تاريخ" Binding="{Binding Date}"/>
            <DataGridTextColumn Header="مستفيد" Binding="{Binding Payee}"/>
            <DataGridTextColumn Header="صافي" Binding="{Binding AmountExclVat}"/>
            <DataGridTextColumn Header="ضريبة" Binding="{Binding VatAmount}"/>
            <DataGridTextColumn Header="إجمالي" Binding="{Binding TotalAmount}"/>
            <DataGridTextColumn Header="طريقة" Binding="{Binding Method}"/>
          </DataGrid.Columns>
        </DataGrid>
        <TextBlock Text="* قيد تلقائي: مدين مصروف (+VAT مدخلات) / دائن صندوق/بنك" Margin="0,8,0,0"/>
      </StackPanel>
    </Border>
  </Grid>
</Page>
